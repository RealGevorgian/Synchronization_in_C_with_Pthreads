In version (A) without synchronization, counter++ is a non-atomic read–modify–write sequence, so concurrent threads can interleave these steps and overwrite each other’s updates, leading to a final value smaller than N * M. In versions (B) and (C), the mutex or spinlock enforces mutual exclusion around the increment, ensuring that only one thread at a time executes the critical section, which makes the increments effectively atomic and guarantees the correct final value.
